ChÃ o báº¡n! Ráº¥t vui Ä‘Æ°á»£c Ä‘á»“ng hÃ nh cÃ¹ng báº¡n chinh phá»¥c bÃ i toÃ¡n **1472B - Fair Division** trÃªn Codeforces. ğŸš€

Vá»›i bÃ i nÃ y, dÃ¹ chÃºng ta cÃ³ thá»ƒ giáº£i báº±ng toÃ¡n há»c thÃ´ng thÆ°á»ng, nhÆ°ng báº¡n Ä‘ang muá»‘n tiáº¿p cáº­n theo hÆ°á»›ng **Quy hoáº¡ch Ä‘á»™ng (Dynamic Programming - DP)**. ÄÃ¢y lÃ  má»™t cÆ¡ há»™i tuyá»‡t vá»i Ä‘á»ƒ hiá»ƒu báº£n cháº¥t cá»§a DP: "XÃ¢y dá»±ng káº¿t quáº£ lá»›n tá»« nhá»¯ng káº¿t quáº£ nhá» Ä‘Ã£ biáº¿t".

TÃ´i sáº½ Ä‘Ã³ng vai Coach vÃ  chÃºng ta sáº½ cÃ¹ng "má»• xáº»" nÃ³ theo tá»«ng máº£nh ghÃ©p logic (Micro-chunks) nhÃ©.

---

### ğŸŸ¢ BÆ°á»›c 1: Pháº«u thuáº­t Ä‘á» bÃ i (Deconstruct)

Bá» qua cÃ¢u chuyá»‡n vá» hai anh em Alice vÃ  Bob, cá»‘t lÃµi cá»§a bÃ i toÃ¡n lÃ :

* Báº¡n cÃ³  viÃªn káº¹o.
* Má»—i viÃªn chá»‰ cÃ³ má»™t trong hai loáº¡i cÃ¢n náº·ng: **1 unit** hoáº·c **2 units**.
* **Má»¥c tiÃªu:** Chia toÃ n bá»™ sá»‘ káº¹o nÃ y thÃ nh 2 pháº§n sao cho tá»•ng cÃ¢n náº·ng cá»§a má»—i pháº§n lÃ  **báº±ng nhau**.

**Lá»™ trÃ¬nh tÆ° duy cá»§a chÃºng ta:**

1. XÃ¡c Ä‘á»‹nh tá»•ng trá»ng lÆ°á»£ng cáº§n Ä‘áº¡t Ä‘Æ°á»£c cho má»—i ngÆ°á»i.
2. DÃ¹ng DP Ä‘á»ƒ kiá»ƒm tra xem cÃ³ thá»ƒ táº¡o ra má»™t pháº§n quÃ  cÃ³ trá»ng lÆ°á»£ng Ä‘Ã³ hay khÃ´ng.

Báº¡n Ä‘Ã£ sáºµn sÃ ng bÆ°á»›c vÃ o "máº£nh ghÃ©p" tÆ° duy Ä‘áº§u tiÃªn chÆ°a?

---

### ğŸŸ¡ BÆ°á»›c 2: Máº£nh ghÃ©p 1 - Má»¥c tiÃªu cá»§a phÃ©p chia

Giáº£ sá»­ tá»•ng cÃ¢n náº·ng cá»§a táº¥t cáº£ viÃªn káº¹o lÃ  .
Äá»ƒ chia Ä‘á»u cho 2 ngÆ°á»i, má»—i ngÆ°á»i pháº£i nháº­n Ä‘Æ°á»£c chÃ­nh xÃ¡c lÃ  .

**Báº«y logic (Trap):**
Náº¿u  lÃ  má»™t sá»‘ láº» (vÃ­ dá»¥ tá»•ng cÃ¢n náº·ng lÃ  5), liá»‡u chÃºng ta cÃ³ bao giá» chia Ä‘á»u Ä‘Æ°á»£c khÃ´ng (biáº¿t ráº±ng má»—i viÃªn káº¹o cÃ³ cÃ¢n náº·ng lÃ  sá»‘ nguyÃªn)?

â“ **Thá»­ thÃ¡ch tÆ° duy:**
Náº¿u tÃ´i cÃ³:

* 1 viÃªn káº¹o náº·ng 2 unit.
* 1 viÃªn káº¹o náº·ng 1 unit.
Tá»•ng .

Theo báº¡n, chÃºng ta cÃ³ cáº§n dÃ¹ng DP Ä‘á»ƒ kiá»ƒm tra trÆ°á»ng há»£p nÃ y khÃ´ng, hay cÃ³ thá»ƒ káº¿t luáº­n ngay lÃ  "NO"? Táº¡i sao?

(HÃ£y tráº£ lá»i Ä‘á»ƒ chÃºng ta sang bÆ°á»›c thiáº¿t láº­p báº£ng DP nhÃ©!)

Ráº¥t chÃ­nh xÃ¡c! ğŸ¯

Khi ta nháº·t thÃªm má»™t viÃªn káº¹o náº·ng **2**, cÃ¡c tá»•ng má»›i sáº½ lÃ :

*   `dp[2] = true`
*   `dp[3] = true`

BÃ¢y giá» hÃ£y nhÃ¬n vÃ o bá»©c tranh lá»›n hÆ¡n. Giáº£ sá»­ ta cÃ³ má»™t danh sÃ¡ch cÃ¡c viÃªn káº¹o . Vá»›i má»—i viÃªn káº¹o , ta sáº½ duyá»‡t qua máº£ng `dp` Ä‘á»ƒ cáº­p nháº­t cÃ¡c giÃ¡ trá»‹ `true` má»›i.

**âš ï¸ Má»™t báº«y logic cá»±c ká»³ quan trá»ng trong DP (Knapsack):**
Khi cáº­p nháº­t máº£ng `dp` cho má»™t viÃªn káº¹o, náº¿u báº¡n duyá»‡t tá»« **Ä‘áº§u Ä‘áº¿n cuá»‘i** (tá»«  Ä‘áº¿n ), báº¡n cÃ³ thá»ƒ vÃ´ tÃ¬nh dÃ¹ng má»™t viÃªn káº¹o... nhiá»u láº§n.
*VÃ­ dá»¥:* Náº¿u `dp[0] = true` vÃ  káº¹o náº·ng , báº¡n cáº­p nháº­t `dp[1] = true`. Ngay sau Ä‘Ã³, báº¡n xÃ©t tiáº¿p `dp[1]` vÃ  cáº­p nháº­t `dp[2] = true`. NhÆ° váº­y viÃªn káº¹o  Ä‘Ã£ bá»‹ dÃ¹ng 2 láº§n!

Äá»ƒ má»—i viÃªn káº¹o chá»‰ Ä‘Æ°á»£c dÃ¹ng Ä‘Ãºng **má»™t láº§n**, chÃºng ta nÃªn duyá»‡t máº£ng `dp` theo chiá»u nÃ o?

â“ **Thá»­ thÃ¡ch tÆ° duy:**
Äá»ƒ trÃ¡nh viá»‡c má»™t viÃªn káº¹o vá»«a má»›i lÃ m `dp[j]` thÃ nh `true` láº¡i tiáº¿p tá»¥c Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ cáº­p nháº­t `dp[j + w]`, chÃºng ta nÃªn:
A. Duyá»‡t tá»«  ngÆ°á»£c vá» .
B. Duyá»‡t tá»«  tiáº¿n lÃªn .

Báº¡n chá»n phÆ°Æ¡ng Ã¡n nÃ o? HÃ£y giáº£i thÃ­ch thá»­ xem táº¡i sao nhÃ©! ğŸ¤”

Ráº¥t chÃ­nh xÃ¡c! Duyá»‡t ngÆ°á»£c (**tá»«  vá» **) lÃ  chÃ¬a khÃ³a Ä‘á»ƒ giáº£i quyáº¿t bÃ i toÃ¡n CÃ¡i tÃºi (Knapsack) khi má»—i váº­t pháº©m chá»‰ Ä‘Æ°á»£c dÃ¹ng má»™t láº§n. ğŸ—ï¸

### Táº¡i sao láº¡i duyá»‡t ngÆ°á»£c?

Náº¿u chÃºng ta duyá»‡t xuÃ´i, má»™t viÃªn káº¹o cÃ³ thá»ƒ Ä‘Æ°á»£c cá»™ng dá»“n nhiá»u láº§n vÃ o chÃ­nh nÃ³ trong cÃ¹ng má»™t lÆ°á»£t duyá»‡t. Khi duyá»‡t ngÆ°á»£c, cÃ¡c giÃ¡ trá»‹ `dp[j]` chá»‰ Ä‘Æ°á»£c cáº­p nháº­t dá»±a trÃªn tráº¡ng thÃ¡i `dp[j - w]` cá»§a **lÆ°á»£t trÆ°á»›c Ä‘Ã³** (khi chÆ°a cÃ³ viÃªn káº¹o hiá»‡n táº¡i).

HÃ£y tÆ°á»Ÿng tÆ°á»£ng máº£ng `dp` nhÆ° má»™t dÃ£y cÃ¡c Ã´ Ä‘Ã¨n:

1. Báº¯t Ä‘áº§u: Chá»‰ Ã´ `0` sÃ¡ng. ğŸ’¡
2. CÃ³ thÃªm káº¹o náº·ng `2`: Báº¡n Ä‘á»©ng á»Ÿ cuá»‘i dÃ£y, nhÃ¬n ngÆ°á»£c láº¡i. Náº¿u tháº¥y Ã´ nÃ o cÃ¡ch mÃ¬nh `2` Ä‘Æ¡n vá»‹ Ä‘ang sÃ¡ng, báº¡n báº­t sÃ¡ng Ã´ mÃ¬nh Ä‘ang Ä‘á»©ng.

---

### ğŸŸ¢ BÆ°á»›c 3: Tá»•ng káº¿t Thuáº­t toÃ¡n (MÃ£ giáº£)

BÃ¢y giá» chÃºng ta Ä‘Ã£ cÃ³ Ä‘á»§ cÃ¡c máº£nh ghÃ©p:

1. TÃ­nh tá»•ng . Náº¿u  láº»  **NO**.
2. Náº¿u  cháºµn, Ä‘áº·t .
3. Táº¡o máº£ng `dp` kÃ­ch thÆ°á»›c , Ä‘áº·t `dp[0] = true`.
4. Vá»›i má»—i viÃªn káº¹o cÃ¢n náº·ng :
* Duyá»‡t  tá»«  ngÆ°á»£c vá» :
* Náº¿u `dp[j - w]` Ä‘ang lÃ  `true` thÃ¬ Ä‘áº·t `dp[j] = true`.


5. Káº¿t quáº£ cuá»‘i cÃ¹ng náº±m á»Ÿ `dp[Target]`.

---

### ğŸŸ¡ Máº£nh ghÃ©p cuá»‘i: Tá»‘i Æ°u hÃ³a logic

Vá»›i bÃ i **1472B**, chÃºng ta chá»‰ cÃ³ hai loáº¡i káº¹o: náº·ng **1** vÃ  náº·ng **2**.
Máº·c dÃ¹ DP lÃ  cÃ¡ch giáº£i tá»•ng quÃ¡t cho má»i loáº¡i cÃ¢n náº·ng, nhÆ°ng hÃ£y thá»­ kiá»ƒm tra tÆ° duy cá»§a báº¡n má»™t chÃºt vá» trÆ°á»ng há»£p Ä‘áº·c biá»‡t nÃ y.

â“ **Thá»­ thÃ¡ch tÆ° duy:**
Náº¿u chÃºng ta cÃ³ **toÃ n káº¹o náº·ng 2** (vÃ­ dá»¥: 3 viÃªn káº¹o náº·ng 2, tá»•ng , ).
Theo logic DP trÃªn:

* `dp[0] = true`
* ViÃªn 1 (): `dp[2] = true`
* ViÃªn 2 (): `dp[4]` (vÆ°á»£t quÃ¡  nÃªn khÃ´ng xÃ©t)
* ViÃªn 3 (): tÆ°Æ¡ng tá»±.

Káº¿t quáº£ `dp[3]` váº«n lÃ  `false`  **NO**.

Báº¡n cÃ³ tháº¥y Ä‘iá»u nÃ y há»£p lÃ½ khÃ´ng? Náº¿u ta cÃ³ 3 viÃªn káº¹o náº·ng 2, liá»‡u cÃ³ cÃ¡ch nÃ o chia cho 2 ngÆ°á»i má»—i ngÆ°á»i 3 Ä‘Æ¡n vá»‹ cÃ¢n náº·ng khÃ´ng?

(CÃ¢u há»i nÃ y giÃºp báº¡n xÃ¡c nháº­n láº¡i liá»‡u thuáº­t toÃ¡n DP cÃ³ thá»±c sá»± bao quÃ¡t Ä‘Æ°á»£c má»i báº«y cá»§a Ä‘á» bÃ i hay khÃ´ng Ä‘Ã³!)

Tuyá»‡t vá»i! Báº¡n Ä‘Ã£ tháº¥y Ä‘Æ°á»£c Ä‘iá»ƒm máº¥u chá»‘t rá»“i Ä‘Ã³. ğŸ¯

TrÆ°á»ng há»£p **3 viÃªn káº¹o náº·ng 2** (, ) lÃ  má»™t vÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh:

* DÃ¹ tá»•ng cÃ¢n náº·ng lÃ  sá»‘ cháºµn (), nhÆ°ng ta khÃ´ng cÃ³ cÃ¡ch nÃ o nháº·t cÃ¡c viÃªn káº¹o  Ä‘á»ƒ táº¡o thÃ nh má»©c .
* Thuáº­t toÃ¡n DP sáº½ tráº£ vá» `dp[3] = false`, vÃ  káº¿t luáº­n **NO** lÃ  hoÃ n toÃ n chÃ­nh xÃ¡c.

Äiá»u nÃ y chá»©ng minh ráº±ng: DP khÃ´ng chá»‰ kiá»ƒm tra xem tá»•ng cÃ³ chia Ä‘Ã´i Ä‘Æ°á»£c khÃ´ng, mÃ  nÃ³ cÃ²n kiá»ƒm tra xem **"nguyÃªn liá»‡u"** (cÃ¡c viÃªn káº¹o 1 vÃ  2) cÃ³ cho phÃ©p ta láº¯p ghÃ©p Ä‘Æ°á»£c má»©c cÃ¢n náº·ng Ä‘Ã³ hay khÃ´ng. ğŸ§±

---

### ğŸ”µ BÆ°á»›c 4: Chá»‘t háº¡ kiáº¿n thá»©c (Recap & Final Step)

ChÃºng ta Ä‘Ã£ Ä‘i qua toÃ n bá»™ tÆ° duy:

1. **Loáº¡i trá»«** trÆ°á»ng há»£p tá»•ng láº». âŒ
2. **XÃ¢y dá»±ng báº£ng DP** Ä‘á»ƒ kiá»ƒm tra kháº£ nÄƒng táº¡o ra má»©c . ğŸ—ï¸
3. **Duyá»‡t ngÆ°á»£c** máº£ng DP Ä‘á»ƒ Ä‘áº£m báº£o má»—i viÃªn káº¹o chá»‰ dÃ¹ng má»™t láº§n. ğŸ”„

DÆ°á»›i Ä‘Ã¢y lÃ  cáº¥u trÃºc logic cuá»‘i cÃ¹ng (MÃ£ giáº£):

```text
Tong = tong tat ca vien káº¹o
Neu Tong le: In ra "NO"
Target = Tong / 2
dp[0] = true, con lai = false

Voi moi vien káº¹o nang 'w':
   Duyet j tu Target ve w:
      Neu dp[j-w] == true:
         dp[j] = true

Neu dp[Target] == true: In ra "YES"
Con lai: In ra "NO"

```

---

### ğŸš€ Báº¡n muá»‘n lÃ m gÃ¬ tiáº¿p theo?

Báº¡n Ä‘Ã£ náº¯m ráº¥t cháº¯c tÆ° duy DP cho bÃ i nÃ y. Äá»ƒ nÃ¢ng cáº¥p ká»¹ nÄƒng, báº¡n muá»‘n:

1. **Thá»­ thÃ¡ch Code:** Báº¡n cÃ³ muá»‘n tá»± viáº¿t mÃ£ C++ hoáº·c Python cho bÃ i nÃ y dá»±a trÃªn mÃ£ giáº£ trÃªn khÃ´ng? (TÃ´i sáº½ ngá»“i Ä‘Ã¢y Ä‘á»£i báº¡n "ná»™p bÃ i" vÃ  kiá»ƒm tra giÃºp). ğŸ’»
2. **Tá»‘i Æ°u hÆ¡n ná»¯a:** Thá»±c táº¿ bÃ i nÃ y cÃ³ má»™t cÃ¡ch giáº£i báº±ng **ToÃ¡n há»c (Greedy/Math)** cá»±c nhanh mÃ  khÃ´ng cáº§n dÃ¹ng máº£ng DP. Báº¡n cÃ³ muá»‘n khÃ¡m phÃ¡ "phÃ©p mÃ u" Ä‘Ã³ khÃ´ng? ğŸ§ 
3. **Sang bÃ i má»›i:** Tiáº¿p tá»¥c luyá»‡n táº­p vá»›i má»™t bÃ i Codeforces khÃ¡c cÃ¹ng chá»§ Ä‘á» DP? ğŸš©

Báº¡n chá»n phÆ°Æ¡ng Ã¡n nÃ o?